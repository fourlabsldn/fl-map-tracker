{"version":3,"file":"index.js","sources":["node_modules/fl-assert/dist/assert.js","src/index.js"],"sourcesContent":["// Bug checking function that will throw an error whenever\n// the condition sent to it is evaluated to false\n/**\n * Processes the message and outputs the correct message if the condition\n * is false. Otherwise it outputs null.\n * @api private\n * @method processCondition\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return {String | null}  - Error message if there is an error, nul otherwise.\n */\nfunction processCondition(condition, errorMessage) {\n  if (!condition) {\n    var completeErrorMessage = '';\n    var re = /at ([^\\s]+)\\s\\(/g;\n    var stackTrace = new Error().stack;\n    var stackFunctions = [];\n\n    var funcName = re.exec(stackTrace);\n    while (funcName && funcName[1]) {\n      stackFunctions.push(funcName[1]);\n      funcName = re.exec(stackTrace);\n    }\n\n    // Number 0 is processCondition itself,\n    // Number 1 is assert,\n    // Number 2 is the caller function.\n    if (stackFunctions[2]) {\n      completeErrorMessage = stackFunctions[2] + ': ' + completeErrorMessage;\n    }\n\n    completeErrorMessage += errorMessage;\n    return completeErrorMessage;\n  }\n\n  return null;\n}\n\n/**\n * Throws an error if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert(myDate !== undefined, \"Date cannot be undefined.\");\n * @api public\n * @method assert\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nfunction assert(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    throw new Error(error);\n  }\n}\n\n/**\n * Logs a warning if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert.warn(myDate !== undefined, \"No date provided.\");\n * @api public\n * @method warn\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nassert.warn = function warn(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    console.warn(error);\n  }\n};\n\nexport default assert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnVnIGNoZWNraW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuZXZlclxuLy8gdGhlIGNvbmRpdGlvbiBzZW50IHRvIGl0IGlzIGV2YWx1YXRlZCB0byBmYWxzZVxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIG1lc3NhZ2UgYW5kIG91dHB1dHMgdGhlIGNvcnJlY3QgbWVzc2FnZSBpZiB0aGUgY29uZGl0aW9uXG4gKiBpcyBmYWxzZS4gT3RoZXJ3aXNlIGl0IG91dHB1dHMgbnVsbC5cbiAqIEBhcGkgcHJpdmF0ZVxuICogQG1ldGhvZCBwcm9jZXNzQ29uZGl0aW9uXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBudWxsfSAgLSBFcnJvciBtZXNzYWdlIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBudWwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3JNZXNzYWdlID0gJyc7XG4gICAgY29uc3QgcmUgPSAvYXQgKFteXFxzXSspXFxzXFwoL2c7XG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIGNvbnN0IHN0YWNrRnVuY3Rpb25zID0gW107XG5cbiAgICBsZXQgZnVuY05hbWUgPSByZS5leGVjKHN0YWNrVHJhY2UpO1xuICAgIHdoaWxlIChmdW5jTmFtZSAmJiBmdW5jTmFtZVsxXSkge1xuICAgICAgc3RhY2tGdW5jdGlvbnMucHVzaChmdW5jTmFtZVsxXSk7XG4gICAgICBmdW5jTmFtZSA9IHJlLmV4ZWMoc3RhY2tUcmFjZSk7XG4gICAgfVxuXG4gICAgLy8gTnVtYmVyIDAgaXMgcHJvY2Vzc0NvbmRpdGlvbiBpdHNlbGYsXG4gICAgLy8gTnVtYmVyIDEgaXMgYXNzZXJ0LFxuICAgIC8vIE51bWJlciAyIGlzIHRoZSBjYWxsZXIgZnVuY3Rpb24uXG4gICAgaWYgKHN0YWNrRnVuY3Rpb25zWzJdKSB7XG4gICAgICBjb21wbGV0ZUVycm9yTWVzc2FnZSA9IGAke3N0YWNrRnVuY3Rpb25zWzJdfTogJHtjb21wbGV0ZUVycm9yTWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICByZXR1cm4gY29tcGxldGVFcnJvck1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGJvb2xlYW4gcGFzc2VkIHRvIGl0IGV2YWx1YXRlcyB0byBmYWxzZS5cbiAqIFRvIGJlIHVzZWQgbGlrZSB0aGlzOlxuICogXHRcdGFzc2VydChteURhdGUgIT09IHVuZGVmaW5lZCwgXCJEYXRlIGNhbm5vdCBiZSB1bmRlZmluZWQuXCIpO1xuICogQGFwaSBwdWJsaWNcbiAqIEBtZXRob2QgYXNzZXJ0XG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gcHJvY2Vzc0NvbmRpdGlvbihjb25kaXRpb24sIGVycm9yTWVzc2FnZSk7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBib29sZWFuIHBhc3NlZCB0byBpdCBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gKiBUbyBiZSB1c2VkIGxpa2UgdGhpczpcbiAqIFx0XHRhc3NlcnQud2FybihteURhdGUgIT09IHVuZGVmaW5lZCwgXCJObyBkYXRlIHByb3ZpZGVkLlwiKTtcbiAqIEBhcGkgcHVibGljXG4gKiBAbWV0aG9kIHdhcm5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbmRpdGlvbiAtIFJlc3VsdCBvZiB0aGUgZXZhbHVhdGVkIGNvbmRpdGlvblxuICogQHBhcmFtICB7U3RyaW5nfSBlcnJvck1lc3NhZ2UgLSBNZXNzYWdlIGV4cGxhaW5pZyB0aGUgZXJyb3IgaW4gY2FzZSBpdCBpcyB0aHJvd25cbiAqIEByZXR1cm4gdm9pZFxuICovXG5hc3NlcnQud2FybiA9IGZ1bmN0aW9uIHdhcm4oY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3NlcnQ7XG4iXSwiZmlsZSI6ImFzc2VydC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","import { get, curry } from 'lodash/fp';\nimport assert from 'fl-assert'\n/*\nPoint = {\n  id: 213,\n  location: { lat: 123, lng: 123}\n  name: 'asdfasd',\n  icon: 'asdfasdf.jpg',\n  marker: null,\n}\n\n*/\nconst withoutIndex = curry((idx, arr) => arr.slice(0, idx).concat(arr.slice(idx + 1, idx.length)));\n\n/**\n * @public\n * @function comparePoints\n * @param {Array<Point>} - oldPoints\n * @param {Array<Point>} - newPoints\n */\nconst comparePoints = curry((oldPoints, newPoints) => {\n  // Elements in oldPoints but not in newPoints\n  const pointsToDelete = oldPoints.filter(p => !newPoints.map(get('id')).includes(p.id));\n\n  // Elements in newPoints but not in oldPoints\n  const pointsToCreate = newPoints.filter(p => !oldPoints.map(get('id')).includes(p.id));\n\n  // Elements of newPoints in oldPoints.\n  const pointsToMove = newPoints\n    .filter(p => !!oldPoints.map(get('id')).includes(p.id))\n    .map(p => {\n      const oldPoint = oldPoints.find(oldP => oldP.id === p.id);\n      return Object.assign({}, oldPoint, p);\n    });\n\n  return {\n    pointsToMove,\n    pointsToCreate,\n    pointsToDelete,\n  };\n});\n\n/**\n * @public\n * @function addMarker\n * @param {MapDriver} - mapDriver\n * @param {Point} - point\n * @return {Point} - a new point with a marker\n */\nconst addMarker = curry((mapDriver, point) => {\n  const marker = mapDriver.createMarker({\n    lat: point.location.lat,\n    lng: point.location.lng,\n    icon: point.icon,\n    optimized: false,        // Info window receives a function to be called\n    // when marker is clicked. Should return an HTMLElement.\n    infoWindow: '<h1>Oh yeah!</h1>',\n  });\n\n  return Object.assign({ marker }, point);\n});\n\nconst withoutPoint = curry((mapDriver, allPoints, point) => {\n  if (point.marker) {\n    mapDriver.destroyMarker(point.marker);\n  }\n\n  const idx = allPoints.indexOf(point);\n  assert(idx !== -1, 'Point is not part of array.');\n  const newAllPoints = withoutIndex(idx, allPoints);\n  return newAllPoints;\n});\n\nexport default {\n  withoutIndex,\n  comparePoints,\n  addMarker,\n  withoutPoint,\n};\n"],"names":["withoutIndex","curry","idx","arr","slice","concat","length","comparePoints","oldPoints","newPoints","pointsToDelete","filter","p","map","get","includes","id","pointsToCreate","pointsToMove","oldPoint","find","oldP","Object","assign","addMarker","mapDriver","point","marker","createMarker","location","lat","lng","icon","withoutPoint","allPoints","destroyMarker","indexOf","newAllPoints"],"mappings":"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","sourceRoot":"/source/"}